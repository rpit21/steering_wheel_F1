<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>F1 Steering Wheel Firmware: hal/hal_can.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">F1 Steering Wheel Firmware
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_52c912f73dac9c4c0e442232e1b2bd80.html">hal</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">hal_can.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Hardware Abstraction Layer (HAL) interface for Controller Area Network (CAN) communication.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for hal_can.h:</div>
<div class="dyncontent">
<div class="center"><img src="hal__can_8h__incl.png" border="0" usemap="#ahal_2hal__can_8h" alt=""/></div>
<map name="ahal_2hal__can_8h" id="ahal_2hal__can_8h">
<area shape="rect" title="Hardware Abstraction Layer (HAL) interface for Controller Area Network (CAN) communication." alt="" coords="5,5,113,31"/>
<area shape="rect" title=" " alt="" coords="24,79,95,104"/>
<area shape="poly" title=" " alt="" coords="62,31,62,65,57,65,57,31"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="hal__can_8h__dep__incl.png" border="0" usemap="#ahal_2hal__can_8hdep" alt=""/></div>
<map name="ahal_2hal__can_8hdep" id="ahal_2hal__can_8hdep">
<area shape="rect" title="Hardware Abstraction Layer (HAL) interface for Controller Area Network (CAN) communication." alt="" coords="5,5,113,31"/>
<area shape="rect" href="can_8c.html" title="Implementation of the high&#45;level CAN communication driver." alt="" coords="7,79,112,104"/>
<area shape="poly" title=" " alt="" coords="62,44,62,79,57,79,57,44"/>
</map>
</div>
</div>
<p><a href="hal__can_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a97c0ea828fd898dd68dfc6612000ff14" id="r_a97c0ea828fd898dd68dfc6612000ff14"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__can_8h.html#a97c0ea828fd898dd68dfc6612000ff14">hal_can_init</a> (const char *interface_name)</td></tr>
<tr class="memdesc:a97c0ea828fd898dd68dfc6612000ff14"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the CAN hardware or simulation interface.  <br /></td></tr>
<tr class="separator:a97c0ea828fd898dd68dfc6612000ff14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8ab97f52a659e0f4bbc4474bdc65352" id="r_ab8ab97f52a659e0f4bbc4474bdc65352"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__can_8h.html#ab8ab97f52a659e0f4bbc4474bdc65352">hal_can_send</a> (uint32_t id, const uint8_t *data, uint8_t len)</td></tr>
<tr class="memdesc:ab8ab97f52a659e0f4bbc4474bdc65352"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a CAN frame over the active CAN interface.  <br /></td></tr>
<tr class="separator:ab8ab97f52a659e0f4bbc4474bdc65352"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f02cc13a5900ab77d8abf0cbb258945" id="r_a7f02cc13a5900ab77d8abf0cbb258945"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__can_8h.html#a7f02cc13a5900ab77d8abf0cbb258945">hal_can_receive</a> (uint32_t *id, uint8_t *data, uint8_t *len)</td></tr>
<tr class="memdesc:a7f02cc13a5900ab77d8abf0cbb258945"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receives a CAN frame from the bus (non-blocking).  <br /></td></tr>
<tr class="separator:a7f02cc13a5900ab77d8abf0cbb258945"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a742e41b4bdf852b3f17d9d40a6272006" id="r_a742e41b4bdf852b3f17d9d40a6272006"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__can_8h.html#a742e41b4bdf852b3f17d9d40a6272006">hal_can_shutdown</a> (void)</td></tr>
<tr class="memdesc:a742e41b4bdf852b3f17d9d40a6272006"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shuts down the CAN interface and releases all associated resources.  <br /></td></tr>
<tr class="separator:a742e41b4bdf852b3f17d9d40a6272006"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Hardware Abstraction Layer (HAL) interface for Controller Area Network (CAN) communication. </p>
<p>This module provides a generic API for CAN communication across both real hardware targets (e.g., S32K microcontrollers) and simulation environments (e.g., Linux/WSL using SocketCAN).</p>
<p>The abstraction allows higher-level modules such as ::canbus.c to transmit and receive CAN frames without being aware of the underlying platform.</p>
<p>Supported operations:</p><ul>
<li>CAN interface initialization.</li>
<li>Frame transmission and reception.</li>
<li>Graceful interface shutdown and cleanup.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>The specific implementation of this interface depends on the build target:<ul>
<li>Hardware target: Uses MCU CAN peripherals (e.g., FlexCAN).</li>
<li>Host PC simulation: Uses SocketCAN or equivalent interface. </li>
</ul>
</dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a97c0ea828fd898dd68dfc6612000ff14" name="a97c0ea828fd898dd68dfc6612000ff14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97c0ea828fd898dd68dfc6612000ff14">&#9670;&#160;</a></span>hal_can_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int hal_can_init </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>interface_name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the CAN hardware or simulation interface. </p>
<p>&lt; Provides fixed-width integer types like uint8_t and uint32_t. </p>
<p>Configures and prepares the CAN controller or simulated interface for communication. On embedded hardware, this includes setting bit timing, enabling clocks, and configuring pins. On host systems (e.g., Linux with SocketCAN), it opens the specified virtual or physical interface.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">interface_name</td><td>String specifying the CAN interface name.<ul>
<li>Example (simulation): <code>"vcan0"</code></li>
<li>Example (hardware): <code>"CAN0"</code>, <code>"FlexCAN_0"</code></li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Initialization successful. </td></tr>
    <tr><td class="paramname">&lt;0</td><td>Initialization failed (e.g., interface not found or already in use). </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__can_8h_a97c0ea828fd898dd68dfc6612000ff14_icgraph.png" border="0" usemap="#ahal__can_8h_a97c0ea828fd898dd68dfc6612000ff14_icgraph" alt=""/></div>
<map name="ahal__can_8h_a97c0ea828fd898dd68dfc6612000ff14_icgraph" id="ahal__can_8h_a97c0ea828fd898dd68dfc6612000ff14_icgraph">
<area shape="rect" title="Initializes the CAN hardware or simulation interface." alt="" coords="369,55,469,80"/>
<area shape="rect" href="can_8c.html#a0505a1f9b26b55293dc199f45e7bb0ec" title="Initializes the CAN communication interface." alt="" coords="243,55,321,80"/>
<area shape="poly" title=" " alt="" coords="356,70,322,70,322,65,356,65"/>
<area shape="rect" href="app__main_8c.html#a630544a7f0a2cc40d8a7fefab7e2fe70" title="Main application function for steering wheel simulation." alt="" coords="108,5,195,31"/>
<area shape="poly" title=" " alt="" coords="234,52,185,33,187,28,236,47"/>
<area shape="rect" href="can__test_8c.html#a90b893ef1dfe6bbc0025daaa49038170" title="Executes the CAN driver functional test." alt="" coords="113,55,190,80"/>
<area shape="poly" title=" " alt="" coords="229,70,190,70,190,65,229,65"/>
<area shape="rect" href="tft__test_8c.html#a951942358331a4998893bb0bbd9b5db0" title="Executes the TFT functional test." alt="" coords="117,104,185,129"/>
<area shape="poly" title=" " alt="" coords="236,87,186,106,185,102,234,82"/>
<area shape="rect" href="main_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="Program entry point." alt="" coords="5,5,60,31"/>
<area shape="poly" title=" " alt="" coords="94,21,60,21,60,15,94,15"/>
</map>
</div>

</div>
</div>
<a id="a7f02cc13a5900ab77d8abf0cbb258945" name="a7f02cc13a5900ab77d8abf0cbb258945"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f02cc13a5900ab77d8abf0cbb258945">&#9670;&#160;</a></span>hal_can_receive()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int hal_can_receive </td>
          <td>(</td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receives a CAN frame from the bus (non-blocking). </p>
<p>Attempts to retrieve one CAN frame from the interface’s receive buffer. If no frame is currently available, the function returns immediately.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">id</td><td>Pointer to a variable where the received CAN ID will be stored. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">data</td><td>Pointer to a buffer where received payload bytes will be copied. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">len</td><td>Pointer to a variable where the received payload length (DLC) will be written.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>A frame was successfully received. </td></tr>
    <tr><td class="paramname">0</td><td>No frame available (non-blocking mode). </td></tr>
    <tr><td class="paramname">&lt;0</td><td>Receive error occurred. </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__can_8h_a7f02cc13a5900ab77d8abf0cbb258945_icgraph.png" border="0" usemap="#ahal__can_8h_a7f02cc13a5900ab77d8abf0cbb258945_icgraph" alt=""/></div>
<map name="ahal__can_8h_a7f02cc13a5900ab77d8abf0cbb258945_icgraph" id="ahal__can_8h_a7f02cc13a5900ab77d8abf0cbb258945_icgraph">
<area shape="rect" title="Receives a CAN frame from the bus (non&#45;blocking)." alt="" coords="468,55,595,80"/>
<area shape="rect" href="can_8c.html#aee3f97e063f52fc610986da9d1f9d68c" title="Receives and decodes ECU status messages from the CAN bus." alt="" coords="243,55,420,80"/>
<area shape="poly" title=" " alt="" coords="454,70,420,70,420,65,454,65"/>
<area shape="rect" href="app__main_8c.html#a630544a7f0a2cc40d8a7fefab7e2fe70" title="Main application function for steering wheel simulation." alt="" coords="108,5,195,31"/>
<area shape="poly" title=" " alt="" coords="271,54,194,32,196,27,272,48"/>
<area shape="rect" href="can__test_8c.html#a90b893ef1dfe6bbc0025daaa49038170" title="Executes the CAN driver functional test." alt="" coords="113,55,190,80"/>
<area shape="poly" title=" " alt="" coords="229,70,190,70,190,65,229,65"/>
<area shape="rect" href="tft__test_8c.html#a951942358331a4998893bb0bbd9b5db0" title="Executes the TFT functional test." alt="" coords="117,104,185,129"/>
<area shape="poly" title=" " alt="" coords="272,86,187,110,185,105,271,81"/>
<area shape="rect" href="main_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="Program entry point." alt="" coords="5,5,60,31"/>
<area shape="poly" title=" " alt="" coords="94,21,60,21,60,15,94,15"/>
</map>
</div>

</div>
</div>
<a id="ab8ab97f52a659e0f4bbc4474bdc65352" name="ab8ab97f52a659e0f4bbc4474bdc65352"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8ab97f52a659e0f4bbc4474bdc65352">&#9670;&#160;</a></span>hal_can_send()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int hal_can_send </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends a CAN frame over the active CAN interface. </p>
<p>Transmits a CAN frame identified by its message ID and data payload. The function may block briefly or queue the frame for asynchronous transmission, depending on the underlying HAL implementation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>CAN message identifier (standard 11-bit or extended 29-bit). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>Pointer to an array containing the message payload. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>Length of the payload in bytes (Data Length Code, typically 0–8).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Frame successfully transmitted or queued. </td></tr>
    <tr><td class="paramname">&lt;0</td><td>Transmission failed (e.g., interface error or full buffer). </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__can_8h_ab8ab97f52a659e0f4bbc4474bdc65352_icgraph.png" border="0" usemap="#ahal__can_8h_ab8ab97f52a659e0f4bbc4474bdc65352_icgraph" alt=""/></div>
<map name="ahal__can_8h_ab8ab97f52a659e0f4bbc4474bdc65352_icgraph" id="ahal__can_8h_ab8ab97f52a659e0f4bbc4474bdc65352_icgraph">
<area shape="rect" title="Sends a CAN frame over the active CAN interface." alt="" coords="475,31,585,56"/>
<area shape="rect" href="can_8c.html#ac8ce316e7de1f9bfef235ae2ab293c50" title="Sends the Steering Wheel status frame over the CAN bus." alt="" coords="243,31,427,56"/>
<area shape="poly" title=" " alt="" coords="461,46,427,46,427,41,461,41"/>
<area shape="rect" href="app__main_8c.html#a630544a7f0a2cc40d8a7fefab7e2fe70" title="Main application function for steering wheel simulation." alt="" coords="108,5,195,31"/>
<area shape="poly" title=" " alt="" coords="229,31,194,27,195,21,230,26"/>
<area shape="rect" href="can__test_8c.html#a90b893ef1dfe6bbc0025daaa49038170" title="Executes the CAN driver functional test." alt="" coords="113,55,190,80"/>
<area shape="poly" title=" " alt="" coords="229,60,191,65,190,60,229,55"/>
<area shape="rect" href="main_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="Program entry point." alt="" coords="5,5,60,31"/>
<area shape="poly" title=" " alt="" coords="94,21,60,21,60,15,94,15"/>
</map>
</div>

</div>
</div>
<a id="a742e41b4bdf852b3f17d9d40a6272006" name="a742e41b4bdf852b3f17d9d40a6272006"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a742e41b4bdf852b3f17d9d40a6272006">&#9670;&#160;</a></span>hal_can_shutdown()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hal_can_shutdown </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Shuts down the CAN interface and releases all associated resources. </p>
<p>Disables or closes the CAN interface. On hardware platforms, this may disable peripheral clocks or interrupts; on host-based simulations, it closes sockets and frees allocated resources.</p>
<p>Should be called once when CAN communication is no longer required. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
