<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>F1 Steering Wheel Firmware: app/app_main.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">F1 Steering Wheel Firmware
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d422163b96683743ed3963d4aac17747.html">app</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">app_main.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Main application entry point for the F1 Steering Wheel simulator.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="hal__adc_8h_source.html">hal_adc.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="hal__gpio_8h_source.html">hal_gpio.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="hal__delay_8h_source.html">hal_delay.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="hal__spi_8h_source.html">hal_spi.h</a>&quot;</code><br />
<code>#include &quot;TFT_LCD.h&quot;</code><br />
<code>#include &quot;hal_lcd.h&quot;</code><br />
<code>#include &quot;<a class="el" href="clutch_8h_source.html">clutch.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="rotary__switch_8h_source.html">rotary_switch.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="buttons_8h_source.html">buttons.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="can_8h_source.html">can.h</a>&quot;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stddef.h&gt;</code><br />
<code>#include &lt;math.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for app_main.c:</div>
<div class="dyncontent">
<div class="center"><img src="app__main_8c__incl.png" border="0" usemap="#aapp_2app__main_8c" alt=""/></div>
<map name="aapp_2app__main_8c" id="aapp_2app__main_8c">
<area shape="rect" title="Main application entry point for the F1 Steering Wheel simulator." alt="" coords="742,5,867,31"/>
<area shape="rect" href="hal__adc_8h.html" title="Hardware Abstraction Layer (HAL) interface for Analog&#45;to&#45;Digital Converter (ADC) operations." alt="" coords="395,79,479,104"/>
<area shape="poly" title=" " alt="" coords="742,33,493,81,492,76,741,28"/>
<area shape="rect" title=" " alt="" coords="457,152,528,177"/>
<area shape="poly" title=" " alt="" coords="742,21,648,23,540,32,489,39,443,50,408,63,384,80,378,90,378,99,391,116,415,132,445,145,443,150,413,137,387,120,373,100,373,88,380,77,405,59,442,44,488,34,539,26,647,18,742,16"/>
<area shape="rect" href="hal__gpio_8h.html" title="Hardware Abstraction Layer (HAL) interface for General&#45;Purpose Input/Output (GPIO) control." alt="" coords="503,79,592,104"/>
<area shape="poly" title=" " alt="" coords="764,33,603,78,601,72,763,28"/>
<area shape="rect" href="hal__delay_8h.html" title="Hardware Abstraction Layer (HAL) interface for blocking delay functions." alt="" coords="5,79,100,104"/>
<area shape="poly" title=" " alt="" coords="742,25,473,44,297,60,114,81,114,76,296,55,473,38,742,20"/>
<area shape="rect" href="hal__spi_8h.html" title="Hardware Abstraction Layer (HAL) for Serial Peripheral Interface (SPI) communication." alt="" coords="953,79,1033,104"/>
<area shape="poly" title=" " alt="" coords="836,28,950,71,948,76,834,33"/>
<area shape="rect" title=" " alt="" coords="994,152,1069,177"/>
<area shape="poly" title=" " alt="" coords="868,24,973,43,1018,58,1035,67,1047,77,1054,92,1055,109,1047,140,1042,138,1050,108,1049,93,1043,80,1032,71,1016,62,971,48,867,29"/>
<area shape="rect" href="TFT__LCD_8h_source.html" title=" " alt="" coords="125,79,215,104"/>
<area shape="poly" title=" " alt="" coords="742,27,519,46,229,81,229,76,519,41,741,21"/>
<area shape="rect" href="hal__lcd_8h_source.html" title=" " alt="" coords="239,79,319,104"/>
<area shape="poly" title=" " alt="" coords="742,29,561,50,338,81,333,82,332,77,338,76,560,45,742,23"/>
<area shape="rect" href="clutch_8h.html" title="Driver interface for clutch pedal position sensing." alt="" coords="1108,79,1181,104"/>
<area shape="poly" title=" " alt="" coords="860,28,1095,77,1094,82,859,33"/>
<area shape="rect" href="rotary__switch_8h.html" title="Driver interface for rotary switch position detection using ADC." alt="" coords="617,79,739,104"/>
<area shape="poly" title=" " alt="" coords="786,33,712,74,709,69,783,28"/>
<area shape="rect" href="buttons_8h.html" title="Driver interface for digital button input handling with debounce and callbacks." alt="" coords="763,79,846,104"/>
<area shape="poly" title=" " alt="" coords="807,31,807,65,802,65,802,31"/>
<area shape="rect" href="can_8h.html" title="High&#45;level CAN communication interface for the Steering Wheel ECU." alt="" coords="871,79,928,104"/>
<area shape="poly" title=" " alt="" coords="821,29,874,68,871,72,818,33"/>
<area shape="rect" title=" " alt="" coords="1205,79,1273,104"/>
<area shape="poly" title=" " alt="" coords="868,24,1012,45,1192,76,1192,81,1011,50,867,30"/>
<area shape="rect" title=" " alt="" coords="1297,79,1368,104"/>
<area shape="poly" title=" " alt="" coords="868,22,1051,42,1284,76,1284,81,1050,47,867,27"/>
<area shape="rect" title=" " alt="" coords="1393,79,1459,104"/>
<area shape="poly" title=" " alt="" coords="868,20,1090,38,1233,54,1380,76,1379,81,1232,60,1090,43,868,26"/>
<area shape="poly" title=" " alt="" coords="448,103,477,140,473,143,444,106"/>
<area shape="poly" title=" " alt="" coords="540,106,512,143,508,140,536,103"/>
<area shape="poly" title=" " alt="" coords="101,99,113,101,444,154,443,159,112,107,100,104"/>
<area shape="poly" title=" " alt="" coords="953,104,941,107,718,140,542,161,541,156,718,135,940,101,952,99"/>
<area shape="poly" title=" " alt="" coords="1001,103,1021,139,1016,141,997,106"/>
<area shape="poly" title=" " alt="" coords="216,100,445,150,443,155,215,105"/>
<area shape="poly" title=" " alt="" coords="314,101,446,145,444,150,313,107"/>
<area shape="poly" title=" " alt="" coords="649,107,536,149,535,145,647,102"/>
<area shape="rect" title=" " alt="" coords="763,152,846,177"/>
<area shape="poly" title=" " alt="" coords="700,102,773,143,771,147,697,106"/>
<area shape="poly" title=" " alt="" coords="764,105,542,155,541,150,763,99"/>
<area shape="poly" title=" " alt="" coords="807,104,807,138,802,138,802,104"/>
<area shape="poly" title=" " alt="" coords="871,104,859,107,685,139,542,160,541,154,684,134,857,101,870,98"/>
<area shape="poly" title=" " alt="" coords="886,106,833,146,830,141,883,102"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:adb2c6444844afca749a5d273bd595249" id="r_adb2c6444844afca749a5d273bd595249"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__main_8c.html#adb2c6444844afca749a5d273bd595249">lcd_update_status</a> (float clutch, int pos, int temp1, int temp2, int gear, bool pit_a, bool drs_a, bool temp_alarm, const char *btn_msg)</td></tr>
<tr class="memdesc:adb2c6444844afca749a5d273bd595249"><td class="mdescLeft">&#160;</td><td class="mdescRight">Render all dynamic information on the TFT display.  <br /></td></tr>
<tr class="separator:adb2c6444844afca749a5d273bd595249"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a288377927b59be5b3a62a9ee4417351a" id="r_a288377927b59be5b3a62a9ee4417351a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__main_8c.html#a288377927b59be5b3a62a9ee4417351a">callback_Btn1</a> (bool statebtn1)</td></tr>
<tr class="memdesc:a288377927b59be5b3a62a9ee4417351a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback for Button 1 - Gear Up.  <br /></td></tr>
<tr class="separator:a288377927b59be5b3a62a9ee4417351a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae82178b122473cf36546657a8fc9d5e9" id="r_ae82178b122473cf36546657a8fc9d5e9"><td class="memItemLeft" align="right" valign="top"><a id="ae82178b122473cf36546657a8fc9d5e9" name="ae82178b122473cf36546657a8fc9d5e9"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>callback_Btn2</b> (bool statebtn2)</td></tr>
<tr class="memdesc:ae82178b122473cf36546657a8fc9d5e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback for Button 2 - Gear Down. <br /></td></tr>
<tr class="separator:ae82178b122473cf36546657a8fc9d5e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6f354312030d7eac7db71cf0c64ca19" id="r_ae6f354312030d7eac7db71cf0c64ca19"><td class="memItemLeft" align="right" valign="top"><a id="ae6f354312030d7eac7db71cf0c64ca19" name="ae6f354312030d7eac7db71cf0c64ca19"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>callback_Btn3</b> (bool statebtn3)</td></tr>
<tr class="memdesc:ae6f354312030d7eac7db71cf0c64ca19"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback for Button 3 - DRS Activation. <br /></td></tr>
<tr class="separator:ae6f354312030d7eac7db71cf0c64ca19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b37dafd8ac28a963b53881792ea5461" id="r_a3b37dafd8ac28a963b53881792ea5461"><td class="memItemLeft" align="right" valign="top"><a id="a3b37dafd8ac28a963b53881792ea5461" name="a3b37dafd8ac28a963b53881792ea5461"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>callback_Btn4</b> (bool statebtn4)</td></tr>
<tr class="memdesc:a3b37dafd8ac28a963b53881792ea5461"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback for Button 4 - PIT Limiter. <br /></td></tr>
<tr class="separator:a3b37dafd8ac28a963b53881792ea5461"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a630544a7f0a2cc40d8a7fefab7e2fe70" id="r_a630544a7f0a2cc40d8a7fefab7e2fe70"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__main_8c.html#a630544a7f0a2cc40d8a7fefab7e2fe70">app_main</a> (void)</td></tr>
<tr class="memdesc:a630544a7f0a2cc40d8a7fefab7e2fe70"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main application function for steering wheel simulation.  <br /></td></tr>
<tr class="separator:a630544a7f0a2cc40d8a7fefab7e2fe70"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a2c3cb87d009c003069b9a90f020f8a9f" id="r_a2c3cb87d009c003069b9a90f020f8a9f"><td class="memItemLeft" align="right" valign="top"><a id="a2c3cb87d009c003069b9a90f020f8a9f" name="a2c3cb87d009c003069b9a90f020f8a9f"></a>
const char *&#160;</td><td class="memItemRight" valign="bottom"><b>msg</b> = &quot;-&quot;</td></tr>
<tr class="memdesc:a2c3cb87d009c003069b9a90f020f8a9f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Message displayed on screen (e.g., "GEAR UP"). <br /></td></tr>
<tr class="separator:a2c3cb87d009c003069b9a90f020f8a9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a673159e90fb46a0d39c0ae8d44ed43f2" id="r_a673159e90fb46a0d39c0ae8d44ed43f2"><td class="memItemLeft" align="right" valign="top"><a id="a673159e90fb46a0d39c0ae8d44ed43f2" name="a673159e90fb46a0d39c0ae8d44ed43f2"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>Button_flag</b> =false</td></tr>
<tr class="memdesc:a673159e90fb46a0d39c0ae8d44ed43f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates that a button event has occurred. <br /></td></tr>
<tr class="separator:a673159e90fb46a0d39c0ae8d44ed43f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad43c3812e6d13e0518d9f8b8f463ffcf" id="r_ad43c3812e6d13e0518d9f8b8f463ffcf"><td class="memItemLeft" align="right" valign="top"><a id="ad43c3812e6d13e0518d9f8b8f463ffcf" name="ad43c3812e6d13e0518d9f8b8f463ffcf"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>count</b> =0</td></tr>
<tr class="memdesc:ad43c3812e6d13e0518d9f8b8f463ffcf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Counter to clear message after short time. <br /></td></tr>
<tr class="separator:ad43c3812e6d13e0518d9f8b8f463ffcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f4767960790d0da20657ccbb0494c6c" id="r_a7f4767960790d0da20657ccbb0494c6c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__main_8c.html#a7f4767960790d0da20657ccbb0494c6c">can_tx_pulse</a> = false</td></tr>
<tr class="separator:a7f4767960790d0da20657ccbb0494c6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53b85e87a8894ae3188db922f6c7c6da" id="r_a53b85e87a8894ae3188db922f6c7c6da"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__main_8c.html#a53b85e87a8894ae3188db922f6c7c6da">can_rx_pulse</a> = false</td></tr>
<tr class="separator:a53b85e87a8894ae3188db922f6c7c6da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73e310cf4dd7588281321a636742d7f7" id="r_a73e310cf4dd7588281321a636742d7f7"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__main_8c.html#a73e310cf4dd7588281321a636742d7f7">can_tx_time</a> = 0</td></tr>
<tr class="separator:a73e310cf4dd7588281321a636742d7f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0705bd9be2088efba0798b2a99bc9672" id="r_a0705bd9be2088efba0798b2a99bc9672"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__main_8c.html#a0705bd9be2088efba0798b2a99bc9672">can_rx_time</a> = 0</td></tr>
<tr class="separator:a0705bd9be2088efba0798b2a99bc9672"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2caa4afdea85a0b151e9a895a4007536" id="r_a2caa4afdea85a0b151e9a895a4007536"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="app__main_8c.html#a2caa4afdea85a0b151e9a895a4007536">can_active</a> = false</td></tr>
<tr class="separator:a2caa4afdea85a0b151e9a895a4007536"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Main application entry point for the F1 Steering Wheel simulator. </p>
<p>This module initializes all hardware abstraction layers (HAL) and drivers, runs the main control loop, handles CAN communication with the ECU, and updates the TFT display to reflect system status in real time.</p>
<p>Features:</p><ul>
<li>CAN transmission and reception feedback indicators.</li>
<li>Debounced button handling with callbacks.</li>
<li>Real-time clutch and rotary encoder monitoring.</li>
<li>Display updates for ECU temperatures, gear, DRS, PIT limiter, etc.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>The code supports both PC simulation (SDL display) and target MCU execution. </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a630544a7f0a2cc40d8a7fefab7e2fe70" name="a630544a7f0a2cc40d8a7fefab7e2fe70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a630544a7f0a2cc40d8a7fefab7e2fe70">&#9670;&#160;</a></span>app_main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void app_main </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main application function for steering wheel simulation. </p>
<p>Main application entry point implemented in <code><a class="el" href="app__main_8c.html" title="Main application entry point for the F1 Steering Wheel simulator.">app/app_main.c</a></code>.</p>
<p>Initializes all modules, enters the main control loop, manages CAN transmission/reception, and updates the display. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="app__main_8c_a630544a7f0a2cc40d8a7fefab7e2fe70_cgraph.png" border="0" usemap="#aapp__main_8c_a630544a7f0a2cc40d8a7fefab7e2fe70_cgraph" alt=""/></div>
<map name="aapp__main_8c_a630544a7f0a2cc40d8a7fefab7e2fe70_cgraph" id="aapp__main_8c_a630544a7f0a2cc40d8a7fefab7e2fe70_cgraph">
<area shape="rect" title="Main application function for steering wheel simulation." alt="" coords="5,499,92,524"/>
<area shape="rect" href="buttons_8c.html#a97ce34dfc749518958e3f0b4e7500833" title="Returns the current stable (debounced) state of all buttons." alt="" coords="162,5,302,31"/>
<area shape="poly" title=" " alt="" coords="48,498,54,408,70,271,82,199,97,132,115,78,138,40,148,32,151,36,142,44,120,80,102,134,87,200,75,271,60,409,53,499"/>
<area shape="rect" href="buttons_8c.html#acef6dd444cb6560da652897ee43ab306" title="Initializes the button driver and underlying HAL." alt="" coords="183,55,281,80"/>
<area shape="poly" title=" " alt="" coords="48,498,56,416,73,293,85,229,100,171,117,123,138,90,152,79,168,71,170,76,155,83,142,93,122,125,105,172,90,231,78,294,62,417,54,499"/>
<area shape="rect" href="buttons_8c.html#ac4098bbb2272e530bda5bc5abd81ee20" title="Registers a callback for a specific button." alt="" coords="140,104,324,129"/>
<area shape="poly" title=" " alt="" coords="49,498,58,424,76,317,103,210,119,168,138,139,142,135,146,139,142,142,124,170,108,211,81,318,63,425,54,499"/>
<area shape="rect" href="buttons_8c.html#ae9db77c2bc850ebc294995d00bad5f06" title="Periodically updates button states and debounces inputs." alt="" coords="171,153,293,179"/>
<area shape="poly" title=" " alt="" coords="47,498,48,442,58,359,69,313,85,268,108,225,138,188,156,176,159,180,142,192,112,228,90,270,74,314,63,359,53,442,52,498"/>
<area shape="rect" href="app__main_8c.html#a288377927b59be5b3a62a9ee4417351a" title="Callback for Button 1 &#45; Gear Up." alt="" coords="175,203,289,228"/>
<area shape="poly" title=" " alt="" coords="48,498,51,449,64,379,75,341,91,303,112,268,138,237,161,223,163,228,142,241,116,271,96,306,80,343,69,381,57,450,53,498"/>
<area shape="rect" href="app__main_8c.html#ae82178b122473cf36546657a8fc9d5e9" title="Callback for Button 2 &#45; Gear Down." alt="" coords="175,252,289,277"/>
<area shape="poly" title=" " alt="" coords="49,498,55,457,70,400,97,339,115,311,138,287,161,273,163,278,142,291,120,314,101,342,75,402,60,458,54,499"/>
<area shape="rect" href="app__main_8c.html#ae6f354312030d7eac7db71cf0c64ca19" title="Callback for Button 3 &#45; DRS Activation." alt="" coords="175,301,289,327"/>
<area shape="poly" title=" " alt="" coords="50,498,60,465,77,421,102,375,119,354,138,336,161,323,164,328,142,340,123,358,107,378,81,424,65,467,55,499"/>
<area shape="rect" href="app__main_8c.html#a3b37dafd8ac28a963b53881792ea5461" title="Callback for Button 4 &#45; PIT Limiter." alt="" coords="175,351,289,376"/>
<area shape="poly" title=" " alt="" coords="53,497,84,443,108,412,138,385,161,373,164,378,142,390,112,415,88,446,58,500"/>
<area shape="rect" href="can_8c.html#a0505a1f9b26b55293dc199f45e7bb0ec" title="Initializes the CAN communication interface." alt="" coords="193,400,271,425"/>
<area shape="poly" title=" " alt="" coords="60,496,94,465,139,434,178,420,180,425,141,439,97,469,64,500"/>
<area shape="rect" href="can_8c.html#aee3f97e063f52fc610986da9d1f9d68c" title="Receives and decodes ECU status messages from the CAN bus." alt="" coords="143,449,321,475"/>
<area shape="poly" title=" " alt="" coords="91,497,139,483,168,476,170,481,141,489,93,502"/>
<area shape="rect" href="can_8c.html#ac8ce316e7de1f9bfef235ae2ab293c50" title="Sends the Steering Wheel status frame over the CAN bus." alt="" coords="140,499,324,524"/>
<area shape="poly" title=" " alt="" coords="92,509,126,509,126,514,92,514"/>
<area shape="rect" href="clutch_8c.html#a16d6951c93f2ca4d4b7db3db51e8956f" title="Gets the current clutch position as a percentage (0–100%)." alt="" coords="150,548,314,573"/>
<area shape="poly" title=" " alt="" coords="93,520,172,542,170,547,92,525"/>
<area shape="rect" href="clutch_8c.html#ad9784eb2115516984281f082470927e3" title="Initializes the clutch driver." alt="" coords="187,597,277,623"/>
<area shape="poly" title=" " alt="" coords="64,522,97,552,141,582,175,596,173,601,139,587,94,557,60,526"/>
<area shape="rect" href="hal__adc_8h.html#a81b32a5bbfb422b51862d59fe2a33ccd" title="Initializes the ADC subsystem (hardware or simulation)." alt="" coords="182,647,282,672"/>
<area shape="poly" title=" " alt="" coords="58,523,89,576,113,606,141,632,170,646,168,651,139,636,109,610,84,579,54,526"/>
<area shape="rect" href="hal__delay_8h.html#aa55539847f5cf68b5462558b3df5dd54" title="Delays program execution for a specified number of milliseconds." alt="" coords="176,696,288,721"/>
<area shape="poly" title=" " alt="" coords="56,524,65,556,82,599,107,643,142,681,164,694,161,699,138,685,103,646,77,601,60,558,50,525"/>
<area shape="rect" href="hal__gpio_8h.html#a08a2270eac937563afd987f54fa13b94" title="Initializes all GPIOs and simulation subsystems." alt="" coords="175,745,289,771"/>
<area shape="poly" title=" " alt="" coords="54,524,61,564,75,620,102,680,120,707,142,731,163,744,160,748,138,735,116,710,97,682,70,622,55,565,49,524"/>
<area shape="rect" href="hal__gpio_8h.html#a69ff3f167ce7ae29da1536ccb1430ce5" title="Sets the logical output value of a specific GPIO pin." alt="" coords="167,795,297,820"/>
<area shape="poly" title=" " alt="" coords="53,524,57,572,69,641,81,679,96,716,116,750,142,780,156,790,153,795,138,784,112,753,91,718,76,680,64,642,51,573,48,524"/>
<area shape="rect" href="hal__spi_8h.html#abdaee45906b06a392e37d82482810661" title="Initializes the SPI communication subsystem." alt="" coords="181,844,283,869"/>
<area shape="poly" title=" " alt="" coords="52,524,53,580,64,662,74,707,91,752,113,793,142,829,169,846,166,850,138,833,108,796,86,754,69,709,58,663,48,581,47,525"/>
<area shape="rect" href="app__main_8c.html#adb2c6444844afca749a5d273bd595249" title="Render all dynamic information on the TFT display." alt="" coords="162,893,302,919"/>
<area shape="poly" title=" " alt="" coords="54,524,63,597,82,704,108,810,124,851,142,879,152,887,148,891,138,882,119,854,103,812,76,705,58,598,49,525"/>
<area shape="rect" href="rotary__switch_8c.html#a9ee17a1a93021a222a858d8faf1da6c4" title="Reads the current position of the rotary switch." alt="" coords="161,943,303,968"/>
<area shape="poly" title=" " alt="" coords="54,524,62,606,78,728,90,791,105,849,122,896,142,928,150,935,146,939,138,932,117,899,100,850,85,792,73,729,56,606,48,525"/>
<area shape="rect" href="rotary__switch_8c.html#a4d88806b5ff7ae1523b03e191aef43a2" title="Initializes the rotary switch driver." alt="" coords="187,992,277,1017"/>
<area shape="poly" title=" " alt="" coords="53,524,60,614,75,751,87,823,102,889,120,943,142,979,157,990,175,997,173,1002,154,995,138,982,115,945,97,890,82,824,70,752,54,614,48,524"/>
<area shape="rect" href="buttons_8c.html#af73ed125eeec73e95c6e7ad06794b5f6" title="Reads and returns the instantaneous (raw) state of all buttons." alt="" coords="389,153,515,179"/>
<area shape="poly" title=" " alt="" coords="294,163,375,163,375,169,294,169"/>
<area shape="rect" href="hal__gpio_8h.html#a0f78562cc337a560635779e35b8001a6" title="Reads the current logical input value of a GPIO pin." alt="" coords="580,153,707,179"/>
<area shape="poly" title=" " alt="" coords="516,163,566,163,566,169,516,169"/>
<area shape="rect" href="hal__can_8h.html#a97c0ea828fd898dd68dfc6612000ff14" title="Initializes the CAN hardware or simulation interface." alt="" coords="402,400,502,425"/>
<area shape="poly" title=" " alt="" coords="272,410,388,410,388,415,272,415"/>
<area shape="rect" href="hal__can_8h.html#a7f02cc13a5900ab77d8abf0cbb258945" title="Receives a CAN frame from the bus (non&#45;blocking)." alt="" coords="389,449,515,475"/>
<area shape="poly" title=" " alt="" coords="321,459,375,459,375,465,321,465"/>
<area shape="rect" href="hal__can_8h.html#ab8ab97f52a659e0f4bbc4474bdc65352" title="Sends a CAN frame over the active CAN interface." alt="" coords="397,499,507,524"/>
<area shape="poly" title=" " alt="" coords="324,509,382,509,382,514,324,514"/>
<area shape="rect" href="clutch_8c.html#ac1fee9a7c2e3ea488e6815c499d522ee" title="Reads the raw ADC value from the clutch input channel." alt="" coords="375,548,529,573"/>
<area shape="poly" title=" " alt="" coords="314,558,361,558,361,563,314,563"/>
<area shape="rect" href="hal__adc_8h.html#a6c785df02b79f56c00a02db666fe5e71" title="Reads a raw analog&#45;to&#45;digital conversion value from a specified ADC channel." alt="" coords="589,671,697,696"/>
<area shape="poly" title=" " alt="" coords="507,571,533,582,585,620,624,659,620,662,581,624,531,587,505,576"/>
<area shape="rect" href="clutch_8c.html#af2e4f352cf47bb014943cae5158114dd" title="Sets calibration limits for clutch pedal readings." alt="" coords="372,597,532,623"/>
<area shape="poly" title=" " alt="" coords="277,607,358,607,358,613,277,613"/>
<area shape="rect" href="rotary__switch_8c.html#a035ec677e6f4a27aa8c82b26c669704c" title="Reads the raw ADC value corresponding to the rotary switch input." alt="" coords="375,795,529,820"/>
<area shape="poly" title=" " alt="" coords="294,940,323,928,355,905,385,879,431,829,435,833,389,883,358,910,325,932,296,945"/>
<area shape="poly" title=" " alt="" coords="471,792,610,701,613,706,474,797"/>
<area shape="rect" href="rotary__switch_8c.html#acae4d192d065b9072127bd5a2285e98b" title="Sets calibration limits for the rotary switch input." alt="" coords="372,992,532,1017"/>
<area shape="poly" title=" " alt="" coords="277,1002,358,1002,358,1007,277,1007"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="app__main_8c_a630544a7f0a2cc40d8a7fefab7e2fe70_icgraph.png" border="0" usemap="#aapp__main_8c_a630544a7f0a2cc40d8a7fefab7e2fe70_icgraph" alt=""/></div>
<map name="aapp__main_8c_a630544a7f0a2cc40d8a7fefab7e2fe70_icgraph" id="aapp__main_8c_a630544a7f0a2cc40d8a7fefab7e2fe70_icgraph">
<area shape="rect" title="Main application function for steering wheel simulation." alt="" coords="108,5,195,31"/>
<area shape="rect" href="main_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="Program entry point." alt="" coords="5,5,60,31"/>
<area shape="poly" title=" " alt="" coords="94,21,60,21,60,15,94,15"/>
</map>
</div>

</div>
</div>
<a id="a288377927b59be5b3a62a9ee4417351a" name="a288377927b59be5b3a62a9ee4417351a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a288377927b59be5b3a62a9ee4417351a">&#9670;&#160;</a></span>callback_Btn1()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void callback_Btn1 </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>statebtn1</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback for Button 1 - Gear Up. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">statebtn1</td><td>Current state of the button (true = pressed). </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="app__main_8c_a288377927b59be5b3a62a9ee4417351a_icgraph.png" border="0" usemap="#aapp__main_8c_a288377927b59be5b3a62a9ee4417351a_icgraph" alt=""/></div>
<map name="aapp__main_8c_a288377927b59be5b3a62a9ee4417351a_icgraph" id="aapp__main_8c_a288377927b59be5b3a62a9ee4417351a_icgraph">
<area shape="rect" title="Callback for Button 1 &#45; Gear Up." alt="" coords="243,5,356,31"/>
<area shape="rect" href="app__main_8c.html#a630544a7f0a2cc40d8a7fefab7e2fe70" title="Main application function for steering wheel simulation." alt="" coords="108,5,195,31"/>
<area shape="poly" title=" " alt="" coords="229,21,195,21,195,15,229,15"/>
<area shape="rect" href="main_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="Program entry point." alt="" coords="5,5,60,31"/>
<area shape="poly" title=" " alt="" coords="94,21,60,21,60,15,94,15"/>
</map>
</div>

</div>
</div>
<a id="adb2c6444844afca749a5d273bd595249" name="adb2c6444844afca749a5d273bd595249"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb2c6444844afca749a5d273bd595249">&#9670;&#160;</a></span>lcd_update_status()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lcd_update_status </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>clutch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>temp1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>temp2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>gear</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>pit_a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>drs_a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>temp_alarm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>btn_msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Render all dynamic information on the TFT display. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clutch</td><td>Current clutch percentage (0–100%). </td></tr>
    <tr><td class="paramname">pos</td><td>Rotary switch position. </td></tr>
    <tr><td class="paramname">temp1</td><td>ECU-reported temperature 1. </td></tr>
    <tr><td class="paramname">temp2</td><td>ECU-reported temperature 2. </td></tr>
    <tr><td class="paramname">gear</td><td>Current gear. </td></tr>
    <tr><td class="paramname">pit_a</td><td>PIT limiter active flag. </td></tr>
    <tr><td class="paramname">drs_a</td><td>DRS active flag. </td></tr>
    <tr><td class="paramname">temp_alarm</td><td>Temperature alarm flag. </td></tr>
    <tr><td class="paramname">msg</td><td>Message to display (from button events). </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="app__main_8c_adb2c6444844afca749a5d273bd595249_icgraph.png" border="0" usemap="#aapp__main_8c_adb2c6444844afca749a5d273bd595249_icgraph" alt=""/></div>
<map name="aapp__main_8c_adb2c6444844afca749a5d273bd595249_icgraph" id="aapp__main_8c_adb2c6444844afca749a5d273bd595249_icgraph">
<area shape="rect" title="Render all dynamic information on the TFT display." alt="" coords="243,5,383,31"/>
<area shape="rect" href="app__main_8c.html#a630544a7f0a2cc40d8a7fefab7e2fe70" title="Main application function for steering wheel simulation." alt="" coords="108,5,195,31"/>
<area shape="poly" title=" " alt="" coords="229,21,195,21,195,15,229,15"/>
<area shape="rect" href="main_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="Program entry point." alt="" coords="5,5,60,31"/>
<area shape="poly" title=" " alt="" coords="94,21,60,21,60,15,94,15"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a2caa4afdea85a0b151e9a895a4007536" name="a2caa4afdea85a0b151e9a895a4007536"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2caa4afdea85a0b151e9a895a4007536">&#9670;&#160;</a></span>can_active</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool can_active = false</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>True if ECU communication is active. </p>

</div>
</div>
<a id="a53b85e87a8894ae3188db922f6c7c6da" name="a53b85e87a8894ae3188db922f6c7c6da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53b85e87a8894ae3188db922f6c7c6da">&#9670;&#160;</a></span>can_rx_pulse</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool can_rx_pulse = false</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>True when a CAN RX pulse is active. </p>

</div>
</div>
<a id="a0705bd9be2088efba0798b2a99bc9672" name="a0705bd9be2088efba0798b2a99bc9672"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0705bd9be2088efba0798b2a99bc9672">&#9670;&#160;</a></span>can_rx_time</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t can_rx_time = 0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Timestamp of last CAN RX frame. </p>

</div>
</div>
<a id="a7f4767960790d0da20657ccbb0494c6c" name="a7f4767960790d0da20657ccbb0494c6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f4767960790d0da20657ccbb0494c6c">&#9670;&#160;</a></span>can_tx_pulse</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool can_tx_pulse = false</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>True when a CAN TX pulse is active. </p>

</div>
</div>
<a id="a73e310cf4dd7588281321a636742d7f7" name="a73e310cf4dd7588281321a636742d7f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73e310cf4dd7588281321a636742d7f7">&#9670;&#160;</a></span>can_tx_time</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t can_tx_time = 0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Timestamp of last CAN TX frame. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
